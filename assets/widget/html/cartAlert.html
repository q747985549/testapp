<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="format-detection" content="telephone=no"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Document</title></head><body><script src="../script/rem.js"></script><script src="../script/api.js"></script><script src="../script/aui-slide.js"></script><script src="../script/vue.js"></script><script src="../script/swiper.min.js"></script><script src="../script/coi.js"></script><link rel="stylesheet" href="../css/style.css"/><link rel="stylesheet" href="../css/api.css"/><link rel="stylesheet" href="../css/aui-slide.css"/><link rel="stylesheet" href="../css/swiper.min.css"/><style>body,html{background:0 0}#alert,#black{position:fixed;left:0;width:100%}#black{height:100%;top:0;background:rgba(0,0,0,.5);z-index:100}#alert{background:#fff;bottom:0;z-index:109}.close{padding:.3rem}.close img{position:relative;z-index:10;float:right;width:.3rem}#alert-content{padding:0 .3rem}#alert-content .c{display:flex;margin-top:-.3rem}#alert-content .c i{width:2.5rem;height:2.5rem;margin-right:.3rem;position:relative;top:-1rem;box-shadow:0 12px 20px 0 rgba(202,202,202,.5);border-radius:.02rem;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#fff}#alert-content .c i img{width:100%}#alert-content .c .r h2{font-size:.4rem;color:#f8526e;margin-top:.8rem;margin-bottom:.2rem}#alert-content .c .r h3{font-size:.28rem;color:#999}#alert-content ul li .label{font-size:.3rem;color:#3c3c3c;margin-top:.2rem;margin-bottom:.2rem}#alert-content ul li dl{display:flex}#alert-content ul li dl dd{width:1.4rem;height:.5rem;border-radius:.5rem;text-align:center;border:1px solid #999;line-height:.5rem;margin-right:.2rem;color:#999}#alert-content ul li .nil{background:#c5c5c5;color:#999;border-color:#c5c5c5}#alert-content ul li .active{color:#fff;border:0;background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%)}.aui-slide-page-wrap{z-index:10!important}.sum{margin-top:.5rem;display:flex;align-items:center;justify-content:flex-end}.add,.sum li{font-size:.3rem}.sum li{display:flex;align-items:center;justify-content:center;margin:0 .2rem;color:#3c3c3c}.sum .left,.sum .right{width:.6rem;height:.6rem;border-radius:.6rem;font-size:.35rem;margin:0 .05rem}.sum .left{background:#999;border:1px solid #999;color:#fff}.sum .right{background:#fff;border:1px solid #f8526e;color:#f8526e}.add{height:1.1rem;width:90%;background:#8a8a8a;position:absolute;bottom:.3rem;left:.3rem;z-index:9;text-align:center;line-height:1.1rem;color:#fff;border-radius:.55rem}.color{background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%)}.scrllO{position:relative;top:-.5rem;overflow:auto;padding-bottom:1.1rem}.scrollDisabled{height:100%;width:100%;overflow:hidden;position:fixed;background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%);z-index:9;top:0;left:0}</style><div id="vm"><div id="black" @click="close"></div><div id="alert"><div class="close"><img src="../image/icon15.png" @click="close"/></div><div id="alert-content"><div class="c"><i><img :src="imgUrl+details.image" alt=""/></i><div class="r"><h2>¥ {{details.price}}</h2><h3>销量:{{details.sales}}</h3></div></div><div class="scrllO"><ul><li v-for="(item,index) in sku"><div class="label">{{item.attr_name}}</div><dl><dd v-for="(itemm,indexx) in item.attr_value" @click="find(index,indexx)" :class="{active:current[index].attr_value==itemm}">{{itemm}}</dd></dl></li></ul><ul class="sum"><li class="left" @click="bet_minus()">-</li><li>{{goodsNum}}</li><li class="right" @click="bet_add()">+</li></ul></div><div class="add color" @click="b_index==1?owin('confirmOrder','confirmOrder.html',{goods_id:details.id,sku_info:current,buy_num:goodsNum}):addCart()">{{b_index==1?"立即购买":"加入购物车"}}</div></div></div></div><script>apiready=function(){new Vue({el:"#vm",data:{imgUrl:$api.imgUrl,details:{},goodsNum:1,b_index:"",sku:[],current:[]},created:function(){this.getData()},methods:{getData:function(){var i=this,a=api.pageParam.id;$api.ajax("/api/goods/detail",{goods_id:a},function(a){200==a.code&&(i.details=a.data,i.sku=a.data.sku,i.b_index=api.pageParam.index),i.sku&&i.sku.forEach(function(a,t){i.current.push({attr_name:"",attr_value:""})})})},bet_minus:function(){this.goodsNum<=1?this.goodsNum=1:this.goodsNum--},bet_add:function(){this.goodsNum++},addCart:function(){var t=this,a=api.pageParam.id;$api.ajax("/api/goods/add_cart",{goods_id:a,sku_info:this.current,buy_num:this.goodsNum},function(a){200==a.code&&(api.toast({msg:a.msg}),t.close()),api.toast({msg:a.msg})})},close:function(){api.closeFrame({name:"cartAlert"})},find:function(a,t){this.current[a].attr_name=this.sku[a].attr_name,this.current[a].attr_value=this.sku[a].attr_value[t]}}})},window.owin=$api.owin;</script></body></html>