<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="format-detection" content="telephone=no"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Document</title></head><body><script src="../script/rem.js"></script><script src="../script/api.js"></script><script src="../script/aui-slide.js"></script><script src="../script/vue.js"></script><script src="../script/swiper.min.js"></script><script src="../script/coi.js"></script><link rel="stylesheet" href="../css/style.css"/><link rel="stylesheet" href="../css/api.css"/><link rel="stylesheet" href="../css/aui-slide.css"/><link rel="stylesheet" href="../css/swiper.min.css"/><style>body,html{background:#f8f8f8!important}.clearfix:before{clear:both;display:block;content:""}#cart-list{padding:.2rem .3rem 2rem;overflow:hidden}#cart-list li{margin-top:.1rem;margin-bottom:.25rem;width:90%;display:flex;align-items:center}#cart-list li .ov{width:100%}#cart-list li .content{display:flex;width:100%;position:relative;height:100%;transition:.3s ease}#cart-list li .content .item{padding:.2rem 0;width:70%}#cart-list li .content .item-con{width:6rem;padding:.2rem;background:#fff;border-radius:6px;display:flex;box-shadow:0 4px 5px 0 rgba(206,206,206,.5)}#cart-list li .show{transform:translate3d(-1.62rem,0,0)!important}#cart-list li .del,#cart-list li .radio{height:100%;display:flex;align-items:center}#cart-list li .del{width:1.42rem;flex-shrink:0;margin-left:.35rem;flex-flow:column;position:absolute;right:-1.62rem;justify-content:center}#cart-list li .del img{width:.6rem;display:block;margin-bottom:.15rem}#cart-list li .del span{font-size:.24rem;color:#ff4141}#cart-list li .radio{width:10%;justify-content:flex-start;margin-right:.3rem}#cart-list li i{width:1.8rem;height:1.8rem;display:block;flex-shrink:0;margin-right:.2rem;overflow:hidden}#cart-list li i img{width:100%;display:block}#cart-list li h1{font-size:.26rem;color:#3c3c3c}#cart-list li h2{margin:.15rem 0;line-height:.22rem}#cart-list li h2 span{background:#f4f4f4;font-size:.22rem;color:#999;padding:5px}#cart-list li h3{display:flex;justify-content:space-between;font-size:.28rem;color:#f8526e}#cart-list li h3 b{font-weight:400}#cart-list li h3 dl{display:flex;border:1px solid #999;border-radius:2px;width:1.4rem;height:.38rem}#cart-list li h3 dl dd{width:.6rem;text-align:center;line-height:.38rem;color:#999}#cart-list li h3 dl .left{border-right:1px solid #999}#cart-list li h3 dl .right{border-left:1px solid #999}#cart-list li h3 dl .btn{width:.4rem;background:#fff}#cart-list li,.r{position:relative}.r input[type=checkbox]{width:.4rem;height:.4rem;opacity:0}.r label{position:absolute;left:0;top:0;width:.4rem;height:.4rem;border-radius:50%}.r input[type=checkbox]+label{border:.02rem solid #bdbdbd}.r input[type=checkbox]:checked+label{background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%);border:1px solid #f8526e}.r input[type=checkbox]:checked+label::after{position:absolute;content:"";width:.1rem;height:.2rem;top:.04rem;left:.12rem;border:.02rem solid #fff;border-top:none;border-left:none;transform:rotate(45deg)}#fixed{height:1.16rem;position:fixed;bottom:0;left:0;transform:translateZ(0);background:#fff;width:100%;padding:.2rem .3rem;border-top:1px solid #ddd;display:flex;justify-content:space-between;z-index:11}#fixed .l{display:flex;align-items:center}#fixed .l .radio{height:100%;margin-right:.5rem}#fixed .l .r,#fixed .l .r span,#fixed .l .sum span{display:flex;height:100%;align-items:center}#fixed .l .r label{top:.15rem}#fixed .l .r span,#fixed .l .sum span{margin-left:.1rem}#fixed .l .r span{font-size:.3rem}#fixed .l .sum,#fixed .submit{display:flex;align-items:center;font-size:.3rem}#fixed .l .sum{height:100%}#fixed .l .sum span{color:#f8526e;font-size:.3 rem}#fixed .l .sum em{color:#f8526e;font-size:.36rem}#fixed .submit{background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%);width:2.3rem;height:.76rem;justify-content:center;color:#fff;border-radius:.42rem}.hide{display:none!important}</style><div id="vm"><div class="header-o"> <div class="l" onclick="closeWin()" tapmode="tapmode"><img src="../image/jt.png"/></div><h1 id="headerTitle">购物车</h1></div><div class="header-bottom"></div><script>function closeWin(){
    api.closeWin();
}

function openWin(url){
    api.openWin({
        name: 'test',
        url: url,
        bgColor:'#ffffff',
        pageParam: {
            name: 'test'
        }
    });
}</script><ul class="clearfix" id="cart-list"><li v-for="(item,index) in cartList"><div class="radio"><div class="r" @click="checkOne(index)"><input type="checkbox" name="" :checked="item.isChecked" :value="item.id"/><label> </label></div></div><div class="ov"><div class="content"><div class="item-con"><i><img :src="imgUrl+item.image" alt=""/></i><div class="item"><h1 class="ellipsis-many">{{item.name}}</h1><h2><span v-if="item.sku_info.length&gt;0">{{item.sku_info}}</span></h2><h3> <b> <span class="sm">¥</span>{{item.price}}</b><dl><dd class="btn left" @click="cartNum({id:item.id,state:2,index:index})">-</dd><dd>{{item.buy_num}}</dd><dd class="btn right" @click="cartNum({id:item.id,state:1,index:index})">+</dd></dl></h3></div></div><div class="del" @click="deleteCart(item.id)"><img src="../image/icon14.png" alt=""/><span>删除</span></div></div></div></li></ul><div id="fixed"><div class="l"><div class="radio"><div class="r" @click="checkAll"><input type="checkbox" :checked="isAll"/><label></label><span>全选</span></div></div><div class="sum">合计<span class="sm">:¥</span><em>{{sum}}</em></div></div><div class="submit" tapmode="hover" @click="settlement({id:current,type:'goods'})">结算({{num}})</div></div></div><script>apiready=function(){$api.fixStatusBar($api.dom(".header-o"));var i=new Vue({el:"#vm",data:{imgUrl:$api.imgUrl,cartList:[],current:[],isAll:!1},created:function(){this.getData()},methods:{getData:function(){var a=this;$api.ajax("/api/goods/get_cart",{v:1},function(t){200==t.code&&(a.cartList=t.data),a.$nextTick(function(){for(var a=null,t=document.querySelectorAll(".content"),i=0;i<t.length;i++){var e,n,c,s,r,o;t[i].addEventListener("touchstart",function(t){e=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY,o=r=!0,a&&(a.className="content")}),t[i].addEventListener("touchmove",function(t){c=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY,r&&0<Math.abs(c-e)-Math.abs(s-n)&&(t.stopPropagation(),10<c-e&&(t.preventDefault(),this.className="content"),10<e-c&&(t.preventDefault(),this.className="show content",a=this),o=!1),o&&Math.abs(c-e)-Math.abs(s-n)<0&&(r=!1)})}})})},deleteCart:function(t){var a=this;$api.ajax("/api/goods/del_cart",{cart:t},function(t){200==t.code&&(api.toast({msg:t.msg}),a.getData())})},cartNum:function(t){var a=t.id,i=t.state;2==i?1<this.cartList[t.index].buy_num&&this.cartList[t.index].buy_num--:1==i&&this.cartList[t.index].buy_num++,$api.ajax("/api/goods/up_cart",{cart:a,num:this.cartList[t.index].buy_num},function(t){api.toast({msg:t.msg})})},checkOne:function(t){this.cartList[t].isChecked=!this.cartList[t].isChecked;var a=!0;this.cartList.forEach(function(t){0==t.isChecked&&(a=!1)}),this.isAll=a},checkAll:function(){var a=this;this.isAll=!this.isAll,this.cartList.forEach(function(t){t.isChecked=a.isAll})},settlement:function(t){var i=this;this.cartList.forEach(function(t){var a=t.id;1==t.isChecked&&i.current.push(a)}),0<this.current.length&&api.openWin({name:"confirmOrder",url:"./confirmOrder.html",pageParam:{params:t}})}},computed:{sum:function(){var t=this.cartList;if(0<t.length){var a=0;return t.forEach(function(t){a+=t.isChecked?t.price*t.buy_num:0}),a}return 0},num:function(){var t=this.cartList;if(0<t.length){var a=0;return t.forEach(function(t){a+=t.isChecked?t.buy_num:0}),a}return 0}}});api.addEventListener({name:"viewappear"},function(t,a){i.getData(),i.current=[]})},window.owin=$api.owin;</script></body></html>