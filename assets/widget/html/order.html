<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="format-detection" content="telephone=no"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Document</title></head><body><script src="../script/rem.js"></script><script src="../script/api.js"></script><script src="../script/aui-slide.js"></script><script src="../script/vue.js"></script><script src="../script/swiper.min.js"></script><script src="../script/coi.js"></script><link rel="stylesheet" href="../css/style.css"/><link rel="stylesheet" href="../css/api.css"/><link rel="stylesheet" href="../css/aui-slide.css"/><link rel="stylesheet" href="../css/swiper.min.css"/><style>body,html{min-height:100%;background:#fbfbfb}.order{padding-top:.1rem}.order ul{padding:0 .3rem .2rem;box-sizing:border-box}.order ul li{width:100%;background:#fff;box-shadow:0 4px 5px 0 rgba(206,206,206,.5);border-radius:6px;margin-top:.2rem}.order ul li .time{width:100%;height:.65rem;border-bottom:1px solid #f0f0f0}.order ul li .time .left,.order ul li .time .right{line-height:.65rem;font-size:.26rem;font-family:PingFangSC-Regular;font-weight:400}.order ul li .time .left{padding-left:.34rem;float:left;color:#999}.order ul li .time .right{float:right;padding-right:.29rem;color:#f8526e}.order ul li .shop{width:100%;height:2.3rem}.order ul li .shop .left{float:left;width:1.62rem;height:1.6rem;background:#fff;margin-left:.25rem;margin-top:.35rem;overflow:hidden}.buy ul,.order ul,.order ul li .shop .left img{width:100%}.order ul li .shop .right{float:right;width:4.78rem;margin-right:.11rem}.order ul li .shop .right h1{width:4.78rem;height:.74rem;font-family:PingFangSC-Regular;font-weight:400;line-height:.37rem;padding-top:.25rem}.order ul li .shop .right h2,.order ul li .shop .right h3,.order ul li .shop .right h4{font-size:.22rem;font-family:PingFangSC-Regular;font-weight:400;color:#999;margin-top:.21rem}.order ul li .shop .right h3,.order ul li .shop .right h4{font-size:.24rem;color:#f8526e;float:left}.order ul li .shop .right h4{font-size:.26rem;color:#999;float:right;padding-right:.09rem}.order ul li .now{padding:.2rem;display:flex;justify-content:flex-end;border-top:1px solid #f0f0f0;width:100%}.order ul li .now .red{background:linear-gradient(134deg,#ec008c 0%,#fc6767 100%);color:#fff}.order ul li .now .gray,.order ul li .now .red,.order ul li .now .red-border{width:1.42rem;height:.5rem;border-radius:.25rem;font-size:.24rem;line-height:.5rem;text-align:center}.order ul li .now .red-border{border:1px solid #f8526e;color:#f8526e}.order ul li .now .gray{background:#999;color:#fff}.buy,.nodata{width:100%;padding:.5rem 0}.nodata h2{font-size:.3rem;color:#999;text-align:center}.buy{padding:0 .3rem}.buy ul li{width:100%;padding:.3rem 0;border-bottom:1px solid #e7e7e7}.buy ul li .top{margin-bottom:.1rem}.buy ul li .top h3,.order ul li .shop .right h1{font-size:.26rem;color:#3c3c3c}.buy ul li .top h2{font-size:.3rem;color:#f74573}.buy ul li .bottom,.buy ul li .top{width:100%;display:flex;align-items:center;justify-content:space-between}.buy ul li .bottom span{font-size:.24rem;color:#999}</style><div id="vm"><div class="shopOrder" v-if="type==1"><div class="nodata" v-if="orderList.length&lt;1"><h2>没有数据</h2></div><div class="order" v-else="v-else"><ul><li v-for="item in orderList"><div class="time"><div class="left">购买时间：{{item.created_time}}</div><div class="right">{{item.status==-1?'已取消':item.status_cn}}</div></div><div class="shop" tapmode="hover" @click="owin(&quot;orderDetails&quot;,&quot;orderDetails.html&quot;,{id:item.id})"><div class="left"><img :src="imgUrl+item.image" alt=""/></div><div class="right"><h1>{{item.name}}</h1><h2>{{item.dese}}</h2><h3>¥{{item.price}}</h3><h4>x{{item.buy_num}}</h4></div></div><div class="now" v-if="item.status==1" @click="owin(&quot;payment&quot;,&quot;payment.html&quot;,{id:item.oid,type:&quot;goods&quot;})"> <span class="red">立即付款</span></div><div class="now" v-if="item.status==2||item.status==3" @click="receiving(item.id)"> <span class="red-border">确认收货</span></div><div class="now" v-if="item.status==4" @click="owin(&quot;publish&quot;,&quot;publish.html&quot;,{id:item.id})"> <span class="gray">立即评价</span></div></li></ul></div></div><div class="buy" v-if="type==2"><ul><li v-for="item in recordList" @click="owin(&quot;vipDetails&quot;,&quot;vipDetails.html&quot;,{id:item.id})"><div class="top"><h3>{{item.vip_name}}</h3><h2>-{{item.price}}</h2></div><div class="bottom"><span>{{item.created_time}}</span><span>{{item.status_cn}}</span></div></li></ul></div></div><script>apiready=function(){api.addEventListener({name:"typeChange"},function(a,e){t.page=1,t.type=a.value.type,t.getData()}),api.addEventListener({name:"statusChange"},function(a,e){t.page=1,t.state=a.value.status,t.getData()});var t=new Vue({el:"#vm",data:{imgUrl:$api.imgUrl,state:"",type:1,orderList:[],noData:!1,page:1,recordList:[]},created:function(){this.getData()},methods:{getData:function(e){var t=this;$api.ajax("/api/user/orderRecord",{state:t.state,page:t.page},function(a){200==a.code&&(t.orderList=e?t.orderList.concat(a.data.data):a.data.data,t.page++),api.refreshHeaderLoadDone()}),$api.ajax("/api/user/vipRecord",{},function(a){200==a.code&&(t.recordList=a.data)})},receiving:function(a){var e=this;$api.ajax("/api/order/take_over",{order_id:a},function(a){200==a.code&&(api.toast({msg:a.msg}),e.getData())})}}});api.setRefreshHeaderInfo({loadingImg:"widget://image/refresh.png",bgColor:"#ccc",textColor:"#fff",textDown:"下拉刷新...",textUp:"松开刷新..."},function(a,e){t.page=1,t.getData()}),api.addEventListener({name:"scrolltobottom",extra:{threshold:30}},function(a,e){t.getData(!0)})},window.owin=$api.owin;</script></body></html>